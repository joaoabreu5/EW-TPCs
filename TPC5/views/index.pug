extends layout

block content
  style.
    a {
      margin-right: 5px;
    }
    
  .w3-card-4
    header.w3-container.w3-green
      h1 Task Manager
    form.w3-container(method="POST" action="/tasks/add")
      br
      a.w3-btn.w3-round.w3-purple.w3-mb-2(href="/users/add") New User
      br
      br

      fieldset
        legend
          h3: b Add Task
        legend
          label: b What
          input.w3-input.w3-round(type="text" name="what")            
          
          label: b Who
          select.w3-select(name="who")
            option(value="" disabled selected) Choose your option

            each u in users
              option(value= u.name) #{u.name}

          label: b Duedate
          input.w3-input.w3-round(type="date" name="date")
          label: b Description
          input.w3-input.w3-round(type="text" name="desc")

      br
      button.w3-btn.w3-round.w3-purple.w3-mb-2(type="submit") Register
      br
      br

    .w3-container
      table.w3-table-all
        tr
          th
            h3: b Tasks to be done
          th
            h3: b Already done

        tr
          td
            table.w3-table-all
              tr
                th What
                th Who
                th Duedate
                th

              for t in tasks
                if t.done == false
                  tr
                    td #{t.what}
                    td #{t.who}    
                    td #{t.date}
                    td
                      a(href="/tasks/"+t.id) [Info]
                      a(href="/tasks/edit/"+t.id) [Edit]
                      a(href="/tasks/done/"+t.id) [Done]
                      a(href="/tasks/delete/"+t.id) [Delete]

          td
            table.w3-table-all
              tr
                th What
                th Who
                th Duedate
                th

              for t in tasks
                if t.done == true
                  tr
                    td #{t.what}
                    td #{t.who}    
                    td #{t.date}
                    td
                      a(href="/tasks/"+t.id) [Info]
                      a(href="/tasks/edit/"+t.id) [Edit]
                      a(href="/tasks/todo/"+t.id) [To do]
                      a(href="/tasks/delete/"+t.id) [Delete]

    footer.w3-container.w3-blue
      h5 Generated by A91755 in #{new Date()}
