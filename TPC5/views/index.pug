extends layout

block content
  style.
    a {
      margin-right: 5px;
    }
    
  .w3-card-4
    header.w3-container.w3-green
      h1 Task Manager
    form.w3-container(method="POST" action="/tasks/add")
      a.w3-btn.w3-round.w3-purple.w3-margin-top.w3-margin-right(href="/users/add") New User

      fieldset
        legend: h3: b Add Task

        label: b What
        input.w3-input.w3-round.w3-margin-bottom(type="text" name="what")            

        label: b Who
        select.w3-select.w3-margin-bottom(name="who")
          option(value="" disabled selected) Choose your option

          each u in users
            option(value= u.name) #{u.name}

        label: b Duedate
        input.w3-input.w3-round.w3-margin-bottom(type="date" name="date")
        
        label: b Description
        input.w3-input.w3-round(type="text" name="desc")

      button.w3-btn.w3-round.w3-purple.w3-margin-top.w3-margin-bottom.w3-margin-right(type="submit") Register

    .w3-container
      table.w3-table-all
        tr
          th
            h3: b Tasks to be done
          th
            h3: b Already done

        tr
          td
            table.w3-table-all
              tr
                th What
                th Who
                th Duedate
                th

              for t in tasks
                if t.done == false
                  tr
                    td(style="vertical-align: middle") #{t.what}
                    td(style="vertical-align: middle") #{t.who}    
                    td(style="vertical-align: middle") #{t.date}
                    td(style="vertical-align: middle")
                      a.w3-btn.w3-round.w3-border(href="/tasks/"+t.id) Info
                      a.w3-btn.w3-round.w3-border(href="/tasks/edit/"+t.id) Edit
                      a.w3-btn.w3-round.w3-border(href="/tasks/done/"+t.id) Done
                      a.w3-btn.w3-round.w3-border(href="/tasks/delete/"+t.id) Delete

          td
            table.w3-table-all
              tr
                th What
                th Who
                th Duedate
                th

              for t in tasks
                if t.done == true
                  tr
                    td(style="vertical-align: middle") #{t.what}
                    td(style="vertical-align: middle") #{t.who}    
                    td(style="vertical-align: middle") #{t.date}
                    td(style="vertical-align: middle")
                      a.w3-btn.w3-round.w3-border(href="/tasks/"+t.id) Info
                      a.w3-btn.w3-round.w3-border(href="/tasks/edit/"+t.id) Edit
                      a.w3-btn.w3-round.w3-border(href="/tasks/todo/"+t.id) To do
                      a.w3-btn.w3-round.w3-border(href="/tasks/delete/"+t.id) Delete

    footer.w3-container.w3-blue
      h5 Generated by A91755 in #{new Date()}
